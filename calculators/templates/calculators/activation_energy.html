{% extends 'calculators/calculator_base.html' %}

{% block tool_name %}Aktivasyon Enerjisi{% endblock %}
{% block tool_icon %}<i class="fa-solid fa-fire-flame-curved"></i>{% endblock %}
{% block header_title %}Aktivasyon Enerjisi{% endblock %}
{% block header_desc %}Arrhenius iki-nokta yöntemi ile Eₐ hesapla{% endblock %}

{% block input_form %}
<div class="space-y-4">
    <div class="grid grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">k₁</label>
            <input type="number" id="k1" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" step="0.000001" placeholder="Örn: 0.001">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">T₁ (K)</label>
            <input type="number" id="t1" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" step="0.01" placeholder="Örn: 298.15">
        </div>
    </div>
    <div class="grid grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">k₂</label>
            <input type="number" id="k2" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" step="0.000001" placeholder="Örn: 0.01">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">T₂ (K)</label>
            <input type="number" id="t2" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" step="0.01" placeholder="Örn: 308.15">
        </div>
    </div>
    <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Enerji Birimi</label>
        <select id="ea-unit" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
            <option value="kJmol">kJ/mol</option>
            <option value="Jmol">J/mol</option>
        </select>
    </div>
    <button onclick="calculateEa()" class="w-full bg-blue-600 text-white font-semibold py-3 rounded-lg hover:bg-blue-700 transition mt-4 shadow-lg shadow-blue-200">Hesapla</button>
    <p class="text-xs text-gray-500 mt-2">Eₐ = −R · ln(k₂/k₁) / (1/T₂ − 1/T₁)</p>
{% endblock %}

{% block extra_results %}
<div id="extra-results" class="mt-4"></div>
{% endblock %}

{% block info_title %}Açıklama{% endblock %}
{% block info_body %}
Arrhenius iki-nokta yöntemi, iki farklı sıcaklıkta ölçülen hız sabitlerinden aktivasyon enerjisini hesaplar. R=8.314 J·mol⁻¹·K⁻¹.
{% endblock %}

{% block specific_js %}
<script>
function calculateEa(){
  const k1 = parseFloat(document.getElementById('k1').value);
  const k2 = parseFloat(document.getElementById('k2').value);
  const T1 = parseFloat(document.getElementById('t1').value);
  const T2 = parseFloat(document.getElementById('t2').value);
  const unit = document.getElementById('ea-unit').value;
  if (isNaN(k1) || isNaN(k2) || isNaN(T1) || isNaN(T2) || k1<=0 || k2<=0) return;
  const R = 8.314;
  const Ea_J = -R * Math.log(k2/k1) / (1.0/T2 - 1.0/T1);
  let value = Ea_J;
  let label = 'J/mol';
  if (unit === 'kJmol'){ value = Ea_J/1000.0; label = 'kJ/mol'; }
  showResult(value.toFixed(4), label);
  window.calcChartData = { type: 'bar', data: [
    { label: 'k₁', value: +k1.toFixed(6) },
    { label: 'k₂', value: +k2.toFixed(6) },
    { label: 'T₁', value: +T1.toFixed(2) },
    { label: 'T₂', value: +T2.toFixed(2) },
    { label: 'Eₐ (J/mol)', value: +Ea_J.toFixed(2) }
  ]};
  const extra = document.getElementById('extra-results');
  extra.innerHTML = `
    <div class="mt-4 p-3 bg-gray-50 rounded-lg border border-gray-100">
      <p class="text-sm text-gray-700">ln(k₂/k₁): <span class="font-bold">${Math.log(k2/k1).toFixed(6)}</span></p>
      <p class="text-sm text-gray-700">1/T₂ − 1/T₁: <span class="font-bold">${(1/T2 - 1/T1).toExponential(3)}</span></p>
    </div>
  `;
}
</script>
{% endblock %}

