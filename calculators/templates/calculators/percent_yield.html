{% extends 'calculators/calculator_base.html' %}

{% block title %}Yüzde Verim Hesaplayıcı - ChemPlus{% endblock %}
{% block tool_name %}Yüzde Verim Hesaplayıcı{% endblock %}

{% block tool_icon %}<i class="fa-solid fa-percent"></i>{% endblock %}
{% block header_title %}Yüzde Verim Hesaplayıcı{% endblock %}
{% block header_desc %}Kimyasal reaksiyonun verimini hesaplayın.{% endblock %}

{% block input_form %}
<div class="space-y-4">
    <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Gerçek Verim (Actual Yield)</label>
        <div class="flex gap-2">
            <input type="number" id="actual" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none" placeholder="Örn: 45">
            <select class="bg-gray-50 border rounded-lg px-2 py-2 outline-none text-sm">
                <option>g</option>
                <option>kg</option>
                <option>mol</option>
            </select>
        </div>
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Teorik Verim (Theoretical Yield)</label>
        <div class="flex gap-2">
            <input type="number" id="theoretical" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none" placeholder="Örn: 50">
            <select class="bg-gray-50 border rounded-lg px-2 py-2 outline-none text-sm">
                <option>g</option>
                <option>kg</option>
                <option>mol</option>
            </select>
        </div>
    </div>

    <button onclick="calculateYield()" class="w-full bg-green-600 text-white font-semibold py-3 rounded-lg hover:bg-green-700 transition shadow-lg shadow-green-200 mt-2">
        Hesapla
    </button>
</div>
{% endblock %}

{% block explanation %}
<p>Yüzde verim, bir kimyasal reaksiyonun ne kadar verimli gerçekleştiğini gösterir.</p>
<div class="bg-gray-100 p-4 rounded-lg my-4 font-mono text-center text-lg font-bold text-green-600">
    % Verim = (Gerçek / Teorik) × 100
</div>
<ul class="list-disc pl-5 space-y-2 text-sm">
    <li><strong>Gerçek Verim:</strong> Deney sonucunda elde edilen miktar.</li>
    <li><strong>Teorik Verim:</strong> Stokiyometrik hesaplamalara göre elde edilmesi gereken maksimum miktar.</li>
</ul>
{% endblock %}

{% block specific_js %}
<script>
    function calculateYield() {
        const actual = parseFloat(document.getElementById('actual').value);
        const theoretical = parseFloat(document.getElementById('theoretical').value);

        if (!actual || !theoretical) {
            alert("Lütfen her iki değeri de giriniz.");
            return;
        }

        if (theoretical <= 0) {
            alert("Teorik verim 0'dan büyük olmalıdır.");
            return;
        }

        const yieldVal = (actual / theoretical) * 100;
        showResult(yieldVal.toFixed(2), '%');
        
        // Color update based on yield
        const resVal = document.getElementById('result-value');
        if(yieldVal > 100) resVal.className = "text-5xl md:text-6xl font-black text-red-500 py-2";
        else if(yieldVal > 90) resVal.className = "text-5xl md:text-6xl font-black text-green-600 py-2";
        else resVal.className = "text-5xl md:text-6xl font-black text-yellow-600 py-2";
    }
</script>
{% endblock %}
